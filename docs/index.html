<!DOCTYPE html>
<html lang="tr" class="h-full bg-gray-50">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Düğün Takip Uygulaması | GiftTracker</title>
  <!-- Tailwind CSS -->
  <link href="./css/style.css" rel="stylesheet">

  <!-- Font Awesome --> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
 
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    body { font-family: 'Poppins', sans-serif; }
    .gradient-bg { background: linear-gradient(135deg, #6b73ff 0%, #000dff 100%); }
  </style>
</head>
<body class="h-full">
  <div id="app" class="min-h-full">
    <!-- Auth Sayfası -->
    <div id="auth-container" class="flex min-h-full items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
      <div class="w-full max-w-md space-y-8">
        <div class="text-center">
          <img class="mx-auto h-24 w-auto bg-transparent" src="assets/reshot-icon-wedding-rings-EAZN5FT2GH.svg" alt="Logo">
          <h2 class="mt-6 text-3xl font-bold text-gray-900">TakıTakip</h2>
          <p class="mt-2 text-sm text-gray-600">Düğün takılarınızı kolayca yönetin</p>
        </div>
        
        <div class="mt-8 space-y-6">
          <div class="space-y-4 rounded-md shadow-sm">
            <div>
              <label for="email" class="sr-only">E-posta</label>
              <input id="email" type="email" required class="relative block w-full rounded-lg border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-500 focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm" placeholder="E-posta adresiniz">
            </div>
            <div>
              <label for="password" class="sr-only">Şifre</label>
              <input id="password" type="password" required class="relative block w-full rounded-lg border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-500 focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm" placeholder="Şifreniz">
            </div>
          </div>


          <div class="grid grid-cols-2 gap-3">
            <button id="login-btn" type="button" class="group relative flex w-full justify-center rounded-lg gradient-bg py-3 px-4 text-sm font-medium text-white hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
              <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                <i class="fas fa-sign-in-alt"></i>
              </span>
              Giriş Yap
            </button>
            <button id="signup-btn" type="button" class="group relative flex w-full justify-center rounded-lg bg-white py-3 px-4 text-sm font-medium text-indigo-600 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 border border-indigo-600">
              <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                <i class="fas fa-user-plus"></i>
              </span>
              Kayıt Ol
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Ana Uygulama -->
    <div id="main-app" class="hidden">
      <div class="gradient-bg pb-32">
        <header class="py-6">
          <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 flex justify-between items-center">
            <h1 class="text-3xl font-bold text-white">Takı Takip Uygulaması</h1>
            <button id="logout-btn" class="flex items-center gap-2 rounded-full bg-white/20 px-4 py-2 text-sm font-medium text-white hover:bg-white/30">
              <i class="fas fa-sign-out-alt"></i>
              Çıkış Yap
            </button>
          </div>
        </header>
      </div>

      <main class="-mt-24">
        <div class="mx-auto max-w-7xl px-4 pb-12 sm:px-6 lg:px-8">
          <!-- Hoşgeldiniz Kartı -->
          <div class="rounded-lg bg-white px-6 py-8 shadow-lg mb-6">
            <div class="flex items-center justify-between">
              <div>
                <h2 class="text-xl font-semibold text-gray-900">Hoş Geldiniz, <span id="username" class="text-indigo-600"></span></h2>
                <p class="mt-1 text-sm text-gray-500">Takı listenizi yönetmeye başlayabilirsiniz</p>
              </div>
              <div class="flex gap-3">
                <button id="export-pdf-btn" class="inline-flex items-center gap-2 rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                  <i class="fas fa-file-pdf"></i>
                  PDF İndir
                </button>
              </div>
            </div>
          </div>

          <!-- Takı Ekleme Formu -->
          <div class="rounded-lg bg-white px-6 py-8 shadow-lg mb-6">
            <h2 class="text-lg font-medium text-gray-900 mb-4">Yeni Takı Ekle</h2>
           <div class="grid grid-cols-1 gap-6 sm:grid-cols-3 items-end">
  <div>
    <label for="gift-name" class="block text-sm font-medium text-gray-700">Ad Soyad</label>
    <input type="text" id="gift-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm py-2 px-3 border" placeholder="Örn: EREN AKCA">
  </div>
  
  <div>
    <label for="gift-select" class="block text-sm font-medium text-gray-700">Takı Türü</label>
    <select id="gift-select" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm py-2 px-3 border">
      <option value="" disabled selected>Seçiniz</option> 
      <option value="GRAM ALTIN">Gram Altın</option>
      <option value="ÇEYREK ALTIN">Çeyrek Altın</option>
      <option value="YARIM ALTIN">Yarım Altın</option>
      <option value="TAM ALTIN">Tam Altın</option> 
      <option value="CUMHURİYET ALTINI">Cumhuriyet Altını</option>
      <option value="BEŞİBİRYERDE">Beşibiryerde</option> 
      <option value="BİLEZİK">Bilezik</option>
      <option value="DİĞER">Diğer (elle gir)</option>
    </select>
  </div>

  <!-- Bu div'i başta tamamen gizliyoruz -->
  <div id="gift-detail-container" class="hidden">
    <label for="gift-detail" class="block text-sm font-medium text-gray-700">Detay</label>
    <input type="text" id="gift-detail" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm py-2 px-3 border" placeholder="Örn: 1000 Dolar">
  </div>
</div>

            <button id="add-gift-btn" class="mt-4 inline-flex items-center gap-2 rounded-md gradient-bg px-4 py-2 text-sm font-medium text-white shadow-sm hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
              <i class="fas fa-plus"></i>
              Takı Ekle
            </button>
          </div>

          <!-- Arama ve Liste -->
          <div class="rounded-lg bg-white px-6 py-8 shadow-lg">
            <div class="flex items-center justify-between mb-6">
              <h2 class="text-lg font-medium text-gray-900">Takı Listesi</h2>
              <div class="relative w-64">
                <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                  <i class="fas fa-search text-gray-400"></i>
                </div>
                <input id="search-input" type="text" class="block w-full rounded-md border-gray-300 py-2 pl-10 pr-3 text-sm placeholder-gray-500 focus:border-indigo-500 focus:outline-none focus:ring-indigo-500" placeholder="İsim ara...">
              </div>
            </div>

            <div class="overflow-x-auto shadow ring-1 ring-black ring-opacity-5 rounded-lg scrollbar-thin scrollbar-thumb-indigo-500 scrollbar-track-gray-200">
              <table class="min-w-full divide-y divide-gray-300">
                <thead class="bg-gray-50">
                  <tr>
                    <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900">#</th>
                    <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6">Ad Soyad</th>
                    <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Takı Detayı</th> 
                    <th scope="col" class="relative py-3.5 pl-3 pr-4 sm:pr-6">
                      <span class="sr-only">Düzenle</span>
                    </th>
                  </tr>
                </thead>
                <tbody id="gifts-container" class="divide-y divide-gray-200 bg-white">
                  <!-- Dinamik olarak eklenecek -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>
  
 <!-- Firebase ve app modülleri -->
<script type="module" src="./js/firebase.js"></script>
<script type="module" src="./js/auth.js"></script>

<!-- jsPDF ve autotable (normal script) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
<script type="module" src="./js/app.js"></script>

</body>
</html>
 
<!-- Firebase Modülleri -->
<script type="module">
  // Firebase Core
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js'
  // Firebase Services
  import { 
    getAuth, 
    signInWithEmailAndPassword,
    createUserWithEmailAndPassword,
    signOut,
    onAuthStateChanged
  } from 'https://www.gstatic.com/firebasejs/10.9.0/firebase-auth.js'
  
  import { 
    getFirestore,
    collection,
    addDoc,
    onSnapshot,
    doc,
    deleteDoc,
    query
  } from 'https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore.js'

  // Firebase yapılandırma
  const firebaseConfig = {
    apiKey: "AIzaSyBaxIoSwR39WnFUiQFRqGwlCGza__lo0pA",
    authDomain: "wedding-4c706.firebaseapp.com",
    projectId: "wedding-4c706",
    storageBucket: "wedding-4c706.firebasestorage.app",
    messagingSenderId: "852095859951",
    appId: "1:852095859951:web:8a397a75f55a8ad68bef1a",
    measurementId: "G-NMZ7WL0SEG"
  };

  // Firebase'i başlat
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Uygulama nesnelerini global yap (geçici çözüm)
  window.firebaseApp = { app, auth, db };
</script>

<!-- Uygulama Scripti --> 

